# Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° (../src/main.rs)

ÐœÐ¾Ð´ÑƒÐ»ÑŒ [`../src/main.rs`](../src/main.rs) ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ñ‚Ð¾Ñ‡ÐºÐ¾Ð¹ Ð²Ñ…Ð¾Ð´Ð° Ð´Ð»Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ñ€ÐµÑ‚Ð°Ñ‚Ð¾Ñ€Ð° ÑÐ·Ñ‹ÐºÐ° SOFIA. ÐžÐ½ Ñ€ÐµÐ°Ð»Ð¸Ð·ÑƒÐµÑ‚ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ñ†Ð¸ÐºÐ» Read-Eval-Print Loop (REPL), ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ ÐºÐ¾Ð´ SOFIA Ð¸ Ð½ÐµÐ¼ÐµÐ´Ð»ÐµÐ½Ð½Ð¾ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ ÐµÐ³Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ.

## ðŸ’¡ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¼Ð¾Ð´ÑƒÐ»Ñ

```mermaid
graph TD
    A[Ð’Ð²Ð¾Ð´ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ] --> B(Lexer);
    B --> C(Parser);
    C --> D(Evaluator);
    D --> E[Ð’Ñ‹Ð²Ð¾Ð´ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°];

    subgraph ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹
        B -- ../src/lexer.rs --> C;
        C -- ../src/parser.rs --> D;
        D -- ../src/evaluator.rs --> E;
    end
```

## ðŸ› ï¸ Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ `main`

```rust
fn main()
```

Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ [`main`](../src/main.rs:16) Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ ÑÑ€ÐµÐ´Ñƒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ REPL.

### ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹

1.  **Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ€ÐµÐ´Ñ‹:** Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð½Ð¾Ð²Ð°Ñ Ð¿ÑƒÑÑ‚Ð°Ñ ÑÑ€ÐµÐ´Ð° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ([`Environment`](../src/object.rs:155)), ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð±ÑƒÐ´ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¸ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ ÑÐµÑÑÐ¸Ð¸ REPL.
2.  **Ð¦Ð¸ÐºÐ» REPL:**
    - **Read (Ð§Ñ‚ÐµÐ½Ð¸Ðµ):** ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ðµ `>> ` Ð¸ Ð¾Ð¶Ð¸Ð´Ð°ÐµÑ‚ Ð²Ð²Ð¾Ð´Ð° Ð¾Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ. Ð’Ð²ÐµÐ´ÐµÐ½Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ° ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ.
    - **Eval (Ð’Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ):**
      - Ð’Ð²ÐµÐ´ÐµÐ½Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ° Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÑ‚ÑÑ Ð»ÐµÐºÑÐµÑ€Ñƒ ([`Lexer::new`](../src/lexer.rs:13)) Ð´Ð»Ñ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² Ñ‚Ð¾ÐºÐµÐ½Ñ‹.
      - Ð¢Ð¾ÐºÐµÐ½Ñ‹ Ð¿ÐµÑ€ÐµÐ´Ð°ÑŽÑ‚ÑÑ Ð¿Ð°Ñ€ÑÐµÑ€Ñƒ ([`Parser::new`](../src/parser.rs:39)) Ð´Ð»Ñ Ð¿Ð¾ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ ÐÐ±ÑÑ‚Ñ€Ð°ÐºÑ‚Ð½Ð¾Ð³Ð¾ Ð¡Ð¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð”ÐµÑ€ÐµÐ²Ð° (AST).
      - Ð•ÑÐ»Ð¸ Ð² Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð²Ð¾Ð·Ð½Ð¸ÐºÐ°ÑŽÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÐ¸, Ð¾Ð½Ð¸ Ð²Ñ‹Ð²Ð¾Ð´ÑÑ‚ÑÑ, Ð¸ Ñ†Ð¸ÐºÐ» Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÐµÑ‚ÑÑ.
      - AST Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÑ‚ÑÑ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ñ€ÐµÑ‚Ð°Ñ‚Ð¾Ñ€Ñƒ ([`evaluator::eval`](../src/evaluator.rs:13)) Ð²Ð¼ÐµÑÑ‚Ðµ Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ ÑÑ€ÐµÐ´Ð¾Ð¹ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ.
    - **Print (ÐŸÐµÑ‡Ð°Ñ‚ÑŒ):** Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ (Ð¾Ð±ÑŠÐµÐºÑ‚ [`Object`](../src/object.rs:8)) Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑÑ Ð½Ð° ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´.
    - **Loop (Ð¦Ð¸ÐºÐ»):** ÐŸÑ€Ð¾Ñ†ÐµÑÑ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÑÐµÑ‚ÑÑ, Ð¿Ð¾ÐºÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ Ð²Ð²Ð¾Ð´ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ctrl+D).

### ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð² REPL

```
>> let x = 10;
null
>> x * 2;
20
>> fn(a, b) { return a + b; }(5, 3);
8
>> class MyClass { public value = 100; }
null
>> let obj = new MyClass();
instance of MyClass
>> obj.value;
100
>> match 5 { 1..=4 => "small", 5..=10 => "medium", _ => "large" }
medium
>>
```
